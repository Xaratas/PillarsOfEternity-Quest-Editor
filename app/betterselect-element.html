
<dom-module id="betterselect-element">
	<style>
		:host {
			/* max-width: inherit; /* Funzt nicht im ff*/
		}
	</style>
	<template>
		<template is="dom-repeat" items="{{options_}}">
			<option>{{item}}</option>
		</template>
	</template>
</dom-module>
<script>
"use strict";
	var BetterSelect = new Polymer({
		is: "betterselect-element",
		extends: "select",

		properties: {
			options_: Array,
			selectedvalue: {
				type: String,
				notify: true
			}
		},

		listeners: {
			'change': 'onChange'
		},
		
		/** Options is a reserved HtmlOptionsCollection */
		factoryImpl: function(options_, selectedvalue) { // label?
			this.options_ = options_;
			this.selectedvalue = selectedvalue;
		},
		// Das selectbox Verhalten setzt den Wert auf das erste Option das kommt, sprich das muss korrigiert werden.
		attached: function() {
			this.async(function() {
				if(this.value === "") { // delay further, looks like bad style
					this.async(function() {
						this.value = this.selectedvalue;
					});
				} else {
					this.value = this.selectedvalue;
				}
			});
		},

		onChange: function() {
			this.selectedvalue = this.value; // direkt Ã¤ndern, wenn es direkt gebunden ist
			this.fire('value-changed', {value: this.value});
		}
	});
</script>
