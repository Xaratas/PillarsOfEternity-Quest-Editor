<link rel="import" href="bower_components/iron-input/iron-input.html">
<link rel="import" href="bower_components/iron-signals/iron-signals.html">

<dom-module id="stringtable-viewer">
	<style>
		:host {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			z-index: 3000;
			background-color: white;
			height: 140px;
		}
		iron-signals {
			height: inherit;
		}

		:host wrap {
			display: flex;
			height: inherit;
		}

		.column {
			display: flex;
			flex-direction: column;
		}

		.left {
			flex-grow: 1;
		}

		.right {
			flex-grow: 5;
		}

		textarea {
			flex-grow: 1; 
		}

		textarea[data-show=""] {
			display: none;
		}
	</style>
	<template>
		<iron-signals on-iron-signal-flow-chart-node-selected="flowChartNodeSelected"></iron-signals>
		<wrap>
			<div class="column left">
				<span>Selected Node: <span>{{nodeId}}</span></span>
				<span>
					<label for="showDefaultText">Default Text</label>
					<input id="showDefaultText" type="checkbox" checked="{{showText::change}}" />
				</span>
				<span>
					<label for"showFemaleText">Female Text</label>
					<input id="showFemaleText" type="checkbox" checked="{{showFemaleText::change}}" />
				</span>
			</div>
			<div class="column right">
			<textarea id="text" data-show$="[[!showText]]" value="{{defaultText::input}}" placeholder="default text"></textarea>
			<textarea id="femaleText" data-show$="[[!showFemaleText]]" value="{{femaleText::input}}" placeholder="female text"></textarea>
			</div>
		</wrap>
	</template>
</dom-module>

<script>
"use strict";
document.addEventListener('WebComponentsReady', function() {
	window.StringtableViewer = Polymer({
		is: "stringtable-viewer",
	
		properties: {
			nodeid: Number,
			showText: {
				type: Boolean,
				value: true	
			},
			showFemaleText: {
				type: Boolean,
				value: true
			},

			defaultText: {
				type:	String,
				observer: 'defaultTextChanged'
			},
			femaleText: {
				type: String,
				observer: 'femaleTextChanged'
			},

			sourceNode: Object
		},

		flowChartNodeSelected: function(e, data, sender) {
			this.nodeId = data[0];
			this.sourceNode = data[3]; // erst this, dann kann der observer oben nichts Ã¼berschreiben
			this.defaultText = data[1];
			this.femaleText = data[2];
		},
	
		defaultTextChanged: function(new_, old) {
			this.sourceNode.defaultText = new_;
		},

		femaleTextChanged: function(new_, old) {
			this.sourceNode.femaleText = new_;
		}
	});
});
</script>
