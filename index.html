<!DOCTYPE html>
<html>
  <head>
    <script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
	<link rel="import" href="root-data-elements.html">
	<link rel="import" href="flowChartNode-elements.html">
	<link rel="import" href="flowChartLink-element.html">
	<link rel="import" href="stringtable-viewer.html">

	<script>
	"use strict";
	 function print_content() {
	     // mach das erst auf button click, also sehr spät, das davor dauert …
	     console.log(document.getElementsByTagName("questdata-element")[0].toXML());
	     console.log(document.getElementsByTagName("conversationdata-element")[0].toXML());
	 };

	 function read_quest() {
	     var questData = new QuestData();
	     questData.fromXML(document.getElementById("questXML").value);
	     document.getElementsByTagName("body")[0].appendChild(questData);
	 };

	 function read_conversation() {
	     var conversationData = new ConversationData();
	     conversationData.fromXML(document.getElementById("conversationXML").value);
	     document.getElementsByTagName("body")[0].appendChild(conversationData);
	 };
	
	function read_stringtable() {
		// connect somehow, prototypisch
		document.getElementsByTagName("conversationdata-element")[0].stringsFromXML(document.getElementById("stringTable").value);
	};
	</script>
  </head>
  <body>
	  <h2>Instructions</h2>
	  Copy the content of a .quest file in the left box. And the content of a conversation file in the right. Hit the buttons.<br />
	  <h3>Nice examples</h3>
	  [gamepath]/data/quests/05_defiance_bay_heritage_hill/05_qst_rise_and_fall.quest <br />
	  [gamepath]/data/conversations/07_gilded_vale/07_bs_rh_ext_guard_01.conversation <br />
	  <h5>Rants and gotchas</h5>
	<span style="font-size:0.8em">Juhu, ersten Browser Bug getriggert. In FF degenerieren input elemente in drag containern. Seit Jahren.
	https://stackoverflow.com/questions/21680363/prevent-drag-event-to-interfere-with-input-elements-in-firefox-using-html5-drag
	</span>
	<br /><br />
	<textarea id="questXML" cols="80" rows="10" placeholder=".quest"></textarea>
	<button onclick="read_quest()">Read Quest</button>
	<textarea id="conversationXML" cols="80" rows="10" placeholder=".conversation"></textarea>
	<button onclick="read_conversation()">Read Conversation</button>
	<textarea id="stringTable" cols="80" rows="10" placeholder=".stringtable"></textarea>
	<button onclick="read_stringtable()">Read Stringtable for ?</button>
    <button onclick="print_content()">to XML</button>

	<stringtable-viewer></stringtable-viewer>
  </body>
</html>
