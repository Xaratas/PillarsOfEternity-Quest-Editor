<!-- Das kÃ¶nnte alles noch viel cooler werden -->
<dom-module id="betterSelect-element">
	<style></style>
	<template>
		<template is="dom-repeat" items="{{options}}">
			<option>{{item}}</option>
		</template>
	</template>
</dom-module>
<script>
"use strict";
	var BetterSelect = Polymer({
		is: "betterSelect-element",
		extends: "select",

		properties: {
			options: Array,

			propertyName: String,	
			callback: Function,
			orginalThis: Object,

			selectedValue: String
		},

		listeners: {
			'change': 'onChange'
		},
		
		factoryImpl: function(options, selectedValue) { // label?
			this.options = options;
			this.selectedValue = selectedValue;
			// TODO
		},
		// Das selectbox Verhalten setzt den Wert auf das erste Option das kommt, sprich das muss korrigiert werden.
		attached: function() {
			this.async(function() {
				this.value = this.selectedValue;
			});
		},

		onChange: function() {
			console.log(this.selectedIndex + " " + this.value);
			this.callback(this.propertyName, this.value, this.orginalThis);
		},

		setCallback: function(propertyName, callback, orginalThis) {
			this.propertyName = propertyName;
			this.callback = callback;
			this.orginalThis = orginalThis;
		}

	});
</script>
